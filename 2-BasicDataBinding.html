<!DOCTYPE>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>D3 Demos</title>
    <script type="text/javascript" src="d3/d3.v2.js"></script>
  </head>
  <body>
    <style type="text/css">
    </style>
    <script type="text/javascript">
// initial example, where we bind by the INDEX
// rather than the time
// Also, the svg coordinate system can be a tad
// confusing
      var svg = d3.select('body').append("svg"),
          w = 300,
          h = 300,
          margin = 20,
          barWidth = 20;

      svg.attr({
        width: w,
        height: h
      }).style("border", "2px solid #f00");

// re-order this to see how the graph changes
      var dataset = [
        {"time": 0, "value": 21},
        {"time": 1, "value": 101},
        {"time": 2, "value": 30},
        {"time": 3, "value": 71}
      ];

      svg.selectAll("rect")
// notice here we use the dataset DIRECTLY
        .data(dataset)
        .enter()
        .append("rect")
        .attr({
          x: function(d, i) { return i*(barWidth+5)+margin; },
          y: margin,
          height: function(d) { return d.value; },
          width: barWidth
        });

      svg.selectAll("text")
        .data(dataset)
        .enter()
        .append("text")
        .attr({
          x: function(d, i) { return i*(barWidth+5)+margin+10 },
          y: function(d) { return d.value + margin - 5 ; },
          fill: "white",
          "font-family": "sans-serif",
          "font-size": 11,
          "text-anchor": "middle"
        }).text(function(d) {return d.value;})
    </script>
  </body>
</html>  